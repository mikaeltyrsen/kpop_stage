<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DMX Template Builder</title>
    <link rel="stylesheet" href="builder.css" />
  </head>
  <body>
    <header class="builder-header">
      <div class="builder-header__content">
        <h1>DMX Template Builder</h1>
        <p>Create and edit lighting cues that sync with your show videos.</p>
      </div>
      <div class="builder-header__actions">
        <button
          id="open-channel-presets"
          type="button"
          class="secondary toggle-button"
          aria-pressed="true"
        >
          Channel Presets
        </button>
      </div>
    </header>

    <section class="builder-controls">
      <label class="control-group" for="video-select">
        <span class="control-label">Song</span>
        <select id="video-select">
          <option value="">Select a songâ€¦</option>
        </select>
      </label>
      <button id="add-row" type="button" class="control-button" disabled>Add Step</button>
      <button id="save-template" type="button" class="primary" disabled>Save Template</button>
      <button id="export-template" type="button" class="secondary" disabled>Export JSON</button>
      <span id="status-message" role="status" aria-live="polite"></span>
    </section>

    <section class="template-info" id="template-info" hidden></section>

    <section class="preset-settings" aria-labelledby="channel-presets-heading">
      <header class="preset-settings__header">
        <div>
          <h2 id="channel-presets-heading">Channel Presets</h2>
          <p>
            Create friendly names for your fixtures and their common values.
            These presets appear in the channel and value dropdowns when you
            build cues.
          </p>
        </div>
        <div class="preset-settings__actions">
          <button id="add-channel-preset" type="button" class="secondary">
            Add Channel Preset
          </button>
        </div>
      </header>
      <div id="channel-presets" class="preset-settings__list" aria-live="polite"></div>
    </section>

    <main class="builder-layout">
      <section class="preview-panel">
        <h2>Video Preview</h2>
        <video id="preview-video" controls preload="metadata"></video>
        <section
          id="channel-status"
          class="channel-status"
          aria-live="polite"
          aria-label="Active channels"
        >
          <h3 class="channel-status__title">Active Channels</h3>
          <div id="channel-status-list" class="channel-status__content">
            <p class="channel-status__empty">All channels at blackout.</p>
          </div>
        </section>
        <div class="video-hints">
          <p>
            Select a row in the table to jump to that cue. The time input keeps the
            video preview aligned with the cue you are editing.
          </p>
        </div>
      </section>

      <section class="table-panel">
        <h2>Lighting Steps</h2>
        <div class="table-wrapper">
          <table class="actions-table">
            <thead>
              <tr>
                <th scope="col">Time (HH:MM:SS)</th>
                <th scope="col">Channel</th>
                <th scope="col">Value</th>
                <th scope="col">Fade (s)</th>
                <th scope="col">Tools</th>
              </tr>
            </thead>
            <tbody id="actions-body"></tbody>
          </table>
        </div>
      </section>
    </main>

    <template id="action-row-template">
      <tr>
        <td data-column="time"></td>
        <td data-column="channel"></td>
        <td data-column="value"></td>
        <td data-column="fade"></td>
        <td data-column="tools"></td>
      </tr>
    </template>

    <script src="builder.js" type="module"></script>
  </body>
</html>
